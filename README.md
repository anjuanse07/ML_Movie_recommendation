# Laporan Proyek Machine Learning - Sean Julius Lase

## Project Overview

Saya mengambil domain proyek yang termasuk kedalam rekomendasi. proyek yang saya angkat akan membawakan rekomendasi film dengan menggunakan teknik _Conten Based Filtering_ dan _Collaborative Filtering_ , bukan secara hybrid namun dengan 2 jenis metode berbeda. Salah satu alasan saya mengambil proyek dengan tema ini adalah dikarenakan pertumbuhan banyaknya penonton bioskop yang meningkat selaras dengan banyaknya jumlah film yang diproduksi[1]. Setiap individu memiliki _genre_ film nya masing-masing. mereka menunjukan keingingan dan antusias yang berbeda pada tiap film yang akan rilis pasca-produksi. Laporan Kementerian Pendidikan dan Kebudayaan menunjukkan ada sebanyak 3.423 produksi film di Indonesia pada 2020. Dari tahun tersebut saja sudah dapat diketahui bahwa ada berbagai jenis dan tipe film dengan latar, alur, plot, tokoh, pesan yang berbeda baik hasil produksi dalam negeri maupun luar negeri. Dari banyaknya film yang diproduksi akan menghasilkan calon penonton yang bingung dan merasa kesulitan untuk mencari dan menentukan film apa saja yang akan ditonton selanjutnya[2]. 


- Mengapa dan bagaimana masalah tersebut harus diselesaikan : Masalah tersebut tentunya akan menimbulkan potensi masyarakat yang akan bingung untuk memilih film apa yang kira kira akan sesuai dengan seleranya. karena kembali lagi minat dari tiap individu berbeda. mungkin ada yang menyukai film laga dengan banyak aksi dari karakter utama, mungkin aday ang menyukai film _thriller_ , mungkin ada yang menyukai film dengan kesan misterius dimana plotnya akan membuat penonton bingung, mungkin juga ada yang menyukai _happy ending_ atau _sad ending_. Tidak semua _genre_, tidak semua plot, tidak semua aksi akan tersedia dalam satu film yang sama. calon-calon penonton yang umpama-nya telah menyukai salah satu film dengan plot tertentu, akan kembali tertantang untuk menonton film yang memiliki plot yang sama dari film lain, untuk kemudian dibandingkan dengan film pertama, menjadi bahan obrolan dengan sesama, dikenang dalam memori, dan aktivitas tersebut akan terjadi secara terus menerus (berkesinambungan). Namun karena sangat banyak referensi film yang ada diseputar dunia akibat rilis film yang sangat banyak, dirasa perlu untuk adanya sebuah sistem yang akan merekomendasikan film sesuai dengan selera kita. Mungkin beberapa orang menggunakan fitur yang disediakan di beberapa situs untuk mencari film untuk memutuskan film yang akan ditonton. Pada proyek kali ini untuk mendapatkan hasil rekomendasi yang akurat dan presisi sesuai dengan keinginan penonton, akan digunakan algoritme _content based filtering_ dengan mencari kemiripan _genre_ yang ada pada dataset film. Pembobotan dilakukan menggunakan metode TF-IDF yang telah dinormalisasi. Kemudian hasil pembobotan akan melalui tahap cosine similarity untuk mencari kemiripan berdasarkan bobot dan diakhiri dengan filtering berdasarkan genre. 


## Business Understanding

Jika kita ada diposisi sebagai pemilik perusahaan yang misalnya bergerak di bidang layanan streaming _movie entertainment_. Model bisnis yang diterapkan tentunya kita sebagai penyedia layanan, yang harus mendistribusikan hasil produksi seseorang. kita sebagai platform besar yang melayani _streaming_ akan menyediakan banyak pilihan film maupun series untuk ditonton oleh konsumen. Tentunya dalam bisnis ini perusahaan menyediakan berbagai paket langganan yang dapat dipilih oleh konsumen untuk mendapatkan untung. Semakin banyak film yang ada, ada kemungkinan semakin besar konsumen akan tertarik untuk berlangganan. Namun tentunya dikarenakan banyaknya film pada platform, konsumen akan bimbang dan bingung dalam memilih film yang sesuai dengan seleranya. Pada awal pendaftaran biasanya akan ada kuisioner singkat tentang tipe film yang disukai calon penonton, hal itu akan dijadikan data bagi platform untuk merekomendasikan film yang didasari dari pilihan _user_, tidak dipungkiri juga _user_ dapat mencari film yang ingin mereka tonton secara individu dan nantinya dapat diimplementasikan oleh sistem platform untuk merekomendasikan film atau tayangan yang sesuai dengan kebiasaan atau pilihan _user_. Atas dasar tersebut dapat diambil kesimpulan bahwa sistem rekomendasi diperlukan untuk membantu _user_ dalam mengambil keputusan dalam menonton film yang di inginkan. Sehingga dirasa penting untuk memiliki sistem rekomendasi yang baik.

### Problem Statements

Berdasarkan kondisi yang telah dijabarkan pada poin sebelumnya, saya akan mengembangkan sebuah sistem rekomedasi film untuk menjawab permasalahan berikut.
- Bagaimana membuat sistem rekomendasi yang dipersonalisasi dengan teknik content-based filtering?
- Dengan data rating yang di miliki, bagaimana perusahaan atau platform dapat merekomendasikan film lain yang mungkin disukai dan belum pernah ditonton oleh pengguna?  

### Goals
Untuk  menjawab pertanyaan tersebut, saya akan membuat Sistem Rekomendasi dengan tujuan atau goals sebagai berikut:
- Menghasilkan sejumlah rekomendasi film yang dipersonalisasi untuk pengguna dengan teknik content-based filtering.
- Menghasilkan sejumlah rekomendasi film yang sesuai dengan preferensi pengguna dan belum pernah dikunjungi sebelumnya dengan teknik collaborative filtering.

### Solution statements
- Sistem rekomendasi dapat digunakan untuk memprediksi rating atau preferensi pengguna terhadap item tertentu. Rekomendasi ini dibuat berdasarkan perilaku pengguna di masa lalu atau perilaku pengguna lainnya. Jadi, sistem ini akan merekomendasikan sesuatu terhadap pengguna berdasarkan data perilaku atau preferensi dari waktu ke waktu. Ia merekomendasikan sejumlah item yang mungkin cocok dengan preferensi pengguna. Oleh karena itu, pada sistem rekomendasi, keluarannya berupa “top-N” recommendation. Artinya, mesin akan memberikan sejumlah rekomendasi dengan peringkat teratas sesuai preferensi pengguna. Harapannya, pengguna akan memilih rekomendasi yang diberikan dan memperpanjang interaksi pengguna di situs atau aplikasi. Oleh karena itu, pada proyek ini ditujukan membangun model sistem rekomendasi dengan preferensi film sebagai target. Untuk mencapai nilai akurasi yang setinggi-tingginya diperlukan tuning hyperparameter yang digunakan dalam pembuatan model machine learning. dalam implementasinya pada proyek ini akan digunakan 2 teknik yaitu Content Based Filtering dan Collaborative Filtering. Ide dari sistem rekomendasi berbasis konten (content-based filtering) adalah merekomendasikan item yang mirip dengan item yang disukai pengguna di masa lalu. sedangkan untuk Collaborative filtering bergantung pada pendapat komunitas pengguna. Ia tidak memerlukan atribut untuk setiap itemnya seperti pada sistem berbasis konten.
-  Metrik yang digunakan dalam mengevaluasi model dalam memprediksi hasil collaborative filtering kali ini adalah Root Mean Squared Error (RMSE). Secara umum, metrik ini mengukur akurasi yang menunjukkan korespondensi rata-rata antara pasangan individual pada nilai forecast dan Observasi.Sedangkan untuk CBF adalah menggunakan matriks kesamaan atau similarity measures dengan menerapkan cosine similarity. Cosine similarity pada Python menghitung kesamaan sebagai dot product yang dinormalisasi dari masukan sampel X dan Y. 


## Data Understanding
Data yang Saya gunakan pada proyek kali ini adalah _Movie Lens Dataset_ dataset yang saya temui dan diunduh dari kaggle. Setelah beberapa kali pencarian, saya menemukan dataset yang terbilang cukup baik ketika di download dan dicek. Dataset ini memiliki 4 bagian file .csv, namun yang saya gunakan hanya 2 file.csv saja dikarenakan 2 file tersebut telah mencakup informasi yang dibutuhkan. Dataset ini berisi 100836 peringkat atau rating dari pengguna pada total kurang lebih 9742 film. Data ini dibuat oleh 610 pengguna yang memberikan rate pada film yang ada. [Kaggle](https://www.kaggle.com/datasets/aigamer/movie-lens-dataset?select=movies.csv).

### Variabel-variabel pada Movie Dataset adalah sebagai berikut:
- Untuk Movie.csv (movies)
    - genres : tipe-tipe atau jenis genre pada film.
    - title : judul lengkap film pada dataset.
    - movieId : id Unique khusus film, penamaan (label) pada tiap judul film yang ada di dataset.
- Untuk Ratings.csv (ratings)
    - ID : penamaan (label) pada tiap baris di dataset.
    - UserID : id Unique khusus user, penamaan (label) pada tiap user yang memberikan rating di dataset.
    - rating : peringkat atau penilaian pada film berdasarkan data dari user.
    - timestamp : mewakili detik sejak tengah malam Waktu Universal yang Terkoordinasi.

**Tahapan untuk memahami data**:
- Setelah melakukan data loading pada dataset dan mengetahui jumlah baris dan kolom yang terdapat pada dataset, saya masuk ke tahap EDA atau Exploratory Data Analysis. Hal tersebut dilakukan untuk menganalisis karakteristik, menemukan pola, anomali, dan memeriksa asumsi pada data. pada bagian ini adalah deskripsi variabel yang didapat dari informasi yang disediakan pada kaggle. Yang akan di eskplorasi adalah 4 jenis dataset yaitu movies.genres , movies.movieId, ratings.userId, dan ratings.movieId. Eksplorasi data ini termasuk kedalam univariate analysis.  movies.info() dideklarasikan untuk mencari tahu tipe data yang ada pada dataset movies, diketahui bahwa ada 1 data tipe int64 dan 2 data tipe object.Kemudian mendeklarasikan kembali fungsi len untuk mengetahui banyak data atas variable movie untuk kolom genres, dan didapatkan sekitar 951 jenis genre film berbeda baik yang campuran maupun single-genre. setelahnya mendeklarasikan kolom genres untuk melihat genre apa saja yang ada pada dataset.
- Selanjutnya adalah dideklarasikan kembali fungsi .info() pada variabel ratings. ratings.info() dideklarasikan untuk mencari tahu tipe data yang ada pada dataset, diketahui bahwa ada 1 data tipe float64 dan 3 data tipe int64. Untuk dianalisis dan dipahami lebih jauh digunakan kembali fungsi len pada kolom userId di variabel ratings dan didapat bahwa ada total 610 user yang memberikan penilaian terhadap film tertentu, dan total seluruh data rating terdapat 100836 rate dari user untuk total 9724 film yang ada pada dataset. 
- Setelahnya dilakukan deklarasi terhadap bentuk matriks (shape) dari variabel movies dengan syntax var.shape(), dan diketahui matriks memiliki besar 9742 x 3. Untuk mengecek isi data bisa dengan menggunakan fungsi .head() dimana fungsi var.head() adalah untuk menampilkan secara otomatis 5 data teratas dari dataset, untuk var nya sendiri pada kasus ini adalah variabel movies.
- Kemudian memanggil fungsi describe() yang memberikan informasi statistik pada masing-masing kolom, dimana Count adalah jumlah sampel pada data. Mean adalah nilai rata-rata. Std adalah standar deviasi. Min yaitu nilai minimum setiap kolom. 25% adalah kuartil pertama. Kuartil adalah nilai yang menandai batas interval dalam empat bagian sebaran yang sama. 50% adalah kuartil kedua, atau biasa juga disebut median (nilai tengah). 75% adalah kuartil ketiga. Max adalah nilai maksimum.
- Data yang dimiliki tidak diperlukan adanya prosesing lebih lanjut dikarenakan data yang dimiliki sudah cukup bagus dan tidak perlu untuk diconcantenate atau digabung dengan data lainnya untuk mencapai kebutuhan. sehingga mempermudah tahapan tersebut.Kemudian dilanjutkan kembali dengan tahap persiapan data yang mana membuat variabel preparation untuk menyimpan nilai variabel movies.

## Data Preparation
Masuk ke tahap persiapan data. Karena data yang digunakan sudah cukup baik proses preparasi dan preprosesing data yang dilakukan adalah memastikan kembali tidak ada data kosong maka fungsi .isna().sum() digunakan untuk mencari jumlah data yang tidak memiliki nilai, atau data kosong (NULL/NaN). Kemudian ada beberapa hal lagi yang saya lakukan , namun terdapat 2 hal berbeda untuk masing masing algortima yang digunakan. penjelasannya adalah sebagai berikut: 
- Melakukan penghapusan kemungkinan data yang memiliki duplikat dengan fungsi drop_duplicates.
- Melakukan konversi dataseries menjadi list dan membuat variabel dictionary sebelum melakukan pengolahan data atau pembuatan model.
- Melakukan persiapan data agar data siap untuk di training pada model sistem rekomendasi yang dibuat.(untuk Collaborative Filtering)

**Penjelasan Teknik**:
- Untuk penghapusan kemungkinan duplikasi data dilakukan karena dalam sistem rekomendasi yang di kembangkan, penting untuk memastikan satu film mewakili satu kategori genres. Tujuannya supaya tidak terjadi dobel atau rangkap kategori dalam satu film. Sehingga, sistem dapat merekomendasikan film berdasarkan kategori genrenya. Oleh karena itu, hanya perlu menghapus data yang duplikat dengan fungsi drop_duplicates(). Dalam hal ini, data duplikat pada kolom ‘variabel yang dipilih’ akan dibuang. pada kasus ini adalah movieId.
- Kemudian selanjutnya adalah perlu dilakukan konversi data series menjadi list. Dalam hal ini, digunakan fungsi tolist() dari library numpy. Data harus dikonversi karena tidak semua data itu valid dan tidak semua data itu bisa di olah sesuai kebutuhan. sehingga diperlukan adanya konversi data agar data dapat diolah sesuai dengan model yang digunakan. oleh karena itu mengkonversi tipe data sesuai kebutuhan merupakan sesuatu yang penting. Tahap berikutnya, kita akan membuat dictionary. data kemudian dideklarasikan dan disimpan dalam variabel datanew. Dictionary adalah stuktur data yang bentuknya seperti kamus. Ada kata kunci kemudian ada nilaninya. Kata kunci harus unik, sedangkan nilai boleh diisi denga apa saja. Untuk membuat dictionary harus ditentukan pasangan key-value pada data movie_id, movie_name, dan movie_genre yang telah disiapkan sebelumnya
- Selanjutnya khusus untuk Collaborative Filtering, terdapat preprosesing dan persiapan data tersendiri. Pada tahap ini, perlu untuk melakukan persiapan data dengan menyandikan (encode) fitur ‘user’ dan ‘movieId’ ke dalam indeks integer. Kemudian sama halnya dengan userID, untuk MovieID juga harus diencode, mengubah movieId menjadi list dan dilakukan proses encoding angka ke movieID.Selanjutnya adalah melakukan mapping atas userId dan MovieId yang udah diencode ke dataframe user dan dataframe movie yang sudah dideklarasikan. Kemudian sebelum masuk ketahap pemodelan data, dilakukan pengecekan terhadap beberapa hal dalam data seperti jumlah user, jumlah film, nilai rating paling rendah, nilai rating paling tinggi, dan mengubah nilai rating menjadi float untuk dianalisa terlebih dahulu. didapat hasil jumlah user : 610, jumlah film: 9724 ,dan Min Rating: 0.5, Max Rating: 5.0. Setelah tahap preprosesing data selesai tahap selanjutnya, adalah membagi data train dan validasi dengan komposisi 80:20. Namun sebelum dibagi, perlu ada pemetaan (mapping) data user dan film menjadi satu value terlebih dahulu. Lalu, membuat rating dalam skala 0 sampai 1 agar mudah dalam melakukan proses training. Hal tersebut dilakukan untuk mempermudah pembacaan data dan disesuaikan dengan kebutuhan pengolahan data.


## Modeling
Masuk kedalam tahap Pengembangan model, dimana pada tahap ini saya menggunakan 2 buah model seperti yang dicontohkan dalam submodul study case keempat : Sistem Rekomendasi, yaitu CBF dan Collaborative Filtering. namun terlebih dahulu menyiapkan data frame untuk analisis kedua model tersebut untuk pada akhirnya sebagai tempat hasil pelatihan model tersebut disimpan.
 - Algoritma Content Based Filtering
    - Teknik yang akan diimplementasikan pertama kali adalah CBF dengan TF-IDF Vectorizer. Teknik tersebut akan digunakan pada sistem rekomendasi untuk menemukan representasi fitur penting dari setiap kategori film. Skor dalam TF-IDF digunakan untuk mengamati istilah-istilah berbeda yang mengandung informasi penting dalam dokumen tertentu.
    - Selanjutnya, melakukan fit dan transformasi ke dalam bentuk matriks, Metode ini akan mentransformasi dokumen ke dalam document-term matrix. dan dapat dilihat besar matriksnya adalah 9742 x 24. Nilai 9742 merupakan ukuran data dan 24 merupakan matrik kategori film.
    - Untuk menghasilkan vektor tf-idf dalam bentuk matriks, kita menggunakan fungsi todense(). Objek matriks dengan bentuk yang sama dan berisi data yang sama yang diwakili oleh matriks sparse, dengan urutan memori yang diminta. Jika out dilewatkan dan merupakan array (bukan numpy.matrix), dan akan diisi dengan nilai yang sesuai dan dikembalikan dalam objek numpy.matrix yang berbagi memori yang sama.
    - Selanjutnya adalah Membuat dataframe untuk melihat tf-idf matrix yang telah dirancang. Kolom diisi dengan genre film dan Baris diisi dengan nama film. dengan total 20 sampel genre, dan 10 sampel film.
    - Setelah berhasil mengidentifikasi representasi fitur penting dari setiap kategori film dengan fungsi tfidfvectorizer. juga telah dihasilkan matriks yang menunjukkan korelasi antara jenis genre dan film. Selanjutnya, dihitung derajat kesamaan antara satu film dengan film lainnya untuk menghasilkan film apa yang akan direkomendasikan.Sekarang, kakan dihitung derajat kesamaan (similarity degree) antar film dengan menggunakan teknik cosine similarity. fungsi yang digunakan aalah cosine_similarity(tf-idf matrix). sehingga kita dapat melihat kesamaan antar film.
    - Selanjutnya, bisa dilihat matriks kesamaan setiap film dengan menampilkan nama film dalam 5 sampel kolom (axis = 1) dan 10 sampel baris (axis=0). Dengan menggunakan cosine similarity, kesamaan antara film yang satu dengan dengan yang lainnya berhasil teridentifikasi. Shape yang dihasilkan dengan nilai (9742, 9742) merupakan ukuran matriks similarity dari data yang dimiliki. Yang artinya, tingkat kesamaan pada 9742 film telah diidentifikasi, Tapi tentu tidak bisa ditampilkan semuanya. Oleh karena itu, hanya dipilih 10 film pada baris vertikal dan 5 film pada sumbu horizontal seperti pada contoh di bawah.
    - Pada tahap ini, dibuat fungsi film_recommendations dengan beberapa parameter sebagai berikut: Nama_film : Nama film yang ada(index kemiripan dataframe). Similarity_data : Dataframe mengenai similarity yang telah didefinisikan sebelumnya. Items : Nama dan fitur yang digunakan untuk mendefinisikan kemiripan, dalam hal ini adalah movie_name dan genre. k : Banyak rekomendasi yang ingin diberikan. Pada fungsi ini, akan diambil k dengan nilai similarity terbesar pada index matrix yang diberikan (i). Fungsi argpartition, akan mengambil sejumlah nilai k tertinggi dari similarity data (dalam kasus ini: dataframe cosine_sim_df). Kemudian, data dari bobot (tingkat kesamaan) tertinggi ke terendah. Data ini akan dimasukkan ke dalam variabel closest. 
    - Setelah model selesai, dapat dicoba dengan menyebutkan salah satu nama film yang ada untuk menemukan rekomendasi film yang mirip dengan Spiderman 3(2007). Hasil CBF menunjukan top-5 rekomendasi film yang sesuai atau mirip dengan film Spiderman 3. Hasil dapat dilihat seperti pada tabel dibawah ini. 

|   	| movie_name                     	| genre                                     	|
|---	|--------------------------------	|-------------------------------------------	|
| 0 	| Iron Man 2 (2010)              	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 1 	| Matrix Reloaded, The (2003)    	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 2 	| Matrix Revolutions, The (2003) 	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 3 	| G.I. Joe: Retaliation (2013)   	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 4 	|                Godzilla (2014) 	| Action\|Adventure\|Sci-Fi\|IMAX           	|

- Algoritma Collaborative Filtering
    - Selanjutnya akan menggunakan model collabortive filtering. Teknik ini membutuhkan data rating dari user. Dari data rating pengguna,akan di identifikasi film-film yang mirip dan belum pernah dikunjungi oleh pengguna untuk kemudian direkomendasikan. Selanjutnya, adalah melakukan load data dan membaca file rating yang sudah pernah dideklarasikan diawal. namun agar tidak tertukar dan tertiban memorinya, namanya akan dirubah, nama variabel rating diubah menjadi df. total data adalah 100836 baris x 4 kolom. (tahap preprosesing dan persiapan data sudah dibahas diatas pada bagian data preparation)
    - Selanjutnya akan masuk kedalam tahap pelatihan, namun sebelumnya dibuat class RecommenderNet dengan keras Model class. model akan menghitung skor kecocokan antara user dan film dengan teknik embedding. Pertama, akan dilakukan proses embedding terhadap data user dan film. Selanjutnya, lakukan operasi perkalian dot product antara embedding user dan film. Selain itu, juga dapat menambahkan bias untuk setiap user dan film. Skor kecocokan ditetapkan dalam skala [0,1] dengan fungsi aktivasi sigmoid. Setelah selesai membuat model, masuk kedalam compiling model yang sudah diinisialisasi. Model ini menggunakan Binary Crossentropy untuk menghitung loss function, Adam (Adaptive Moment Estimation) sebagai optimizer dengan learning rate 0.001, dan root mean squared error (RMSE) sebagai metrics evaluation.
    - Kemudian model dikompile dan setelah selesai mengkompile, akan dilakukan proses training data menggunakan fungsi model.fit yang disimpan kedalam memori variabel history. model akan dilatih sebanyak 50 kali epoch, dan batch size sebesar 16.
    - Setelah model selesai dilatih akan dilakukan plotting pada model recommendernet yang telah dibuat berdasarkan nilai rmse dan valrmse yang dihasilkan selama proses training. Hasil proses training model cukup smooth dan model konvergen pada epochs sekitar 50. Dari proses ini, dapat diperoleh nilai error akhir sebesar sekitar 0.5829 dan error pada data validasi sebesar 0.1967. Nilai tersebut cukup bagus untuk sistem rekomendasi. 
    - Untuk mendapatkan rekomendasi film, akan diambil sampel user secara acak dan definisikan variabel movie_not_watched yang merupakan daftar film yang belum pernah ditonton oleh pengguna. Hal ini diperlukan mengingat daftar movie_not_watched inilah yang akan menjadi film yang direkomendasikan. Sebelumnya, pengguna telah memberi rating pada beberapa film yang telah mereka kunjungi. rating ini akan digunakan untuk membuat rekomendasi film yang mungkin cocok untuk pengguna. film yang akan direkomendasikan tentulah film yang belum pernah dikunjungi oleh pengguna. Oleh karena itu, perlu membuat variabel movie_not_watched sebagai daftar film untuk direkomendasikan pada pengguna. Variabel movie_not_watched diperoleh dengan menggunakan operator bitwise (~) pada variabel movie_watched_by_user. 
    - Selanjutnya, untuk memperoleh rekomendasi film, gunakan fungsi model.predict() dari library Keras dengan menerapkan model.predict(), hasil dari prediksi latihan akan merekomendasikan film yang sesuai dengan user yang tertera atau sampel user yang digunakan. dan hasilnya akan memberikan top-10 rekomendasi film berdasarkan data dari user dan menunjukan top 5 rating terbaik berdasarkan data rating dari user sampel. Sampel diuji dari user 509 , yang kemudian hasil dari rekomendasinya akan dicocokan berdasarkan genre dan rating yang diberikan oleh user. masing-masing film yang telah di beri rating oleh user akan menjadi acuan rekomendasi dari model yang dibuat, sehingga dapat terlihat bahwa hasil top-10  genre film yang direkomendasikan beririsan dengan genre film yang dirating oleh user sampel. Hasil dapat dilihat seperti pada tabel dibawah ini.

| -  	|                      Showing Recommendation for Sample User :                     	|                         509                         	|
|----	|:---------------------------------------------------------------------------------:	|:---------------------------------------------------:	|
| -  	|                         Movies with high ratings from user                        	|                        Genre                        	|
| 1  	|                             Great Dictator, The (1940)                            	|                  Comedy\|Drama\|War                 	|
| 2  	|             Lord of the Rings: The Fellowship of the Ring, The (2001)             	|                  Adventure\|Fantasy                 	|
| 3  	|                   Lord of the Rings: The Two Towers, The (2002)                   	|                  Adventure\|Fantasy                 	|
| 4  	|               Lord of the Rings: The Return of the King, The (2003)               	|          Action\|Adventure\|Drama\|Fantasy          	|
| 5  	|                               Pitch Perfect 2 (2015)                              	|                        Comedy                       	|
| -  	|                            Top 10 movies recommendation                           	|             ---------------------------             	|
| 1  	|                        Heidi Fleiss: Hollywood Madam (1995)                       	|                     Documentary                     	|
| 2  	|                               Paths of Glory (1957)                               	|                      Drama\|War                     	|
| 3  	| Jonah Who Will Be 25 in the Year 2000 (Jonas qui aura 25 ans en l'an 2000) (1976) 	|                        Comedy                       	|
| 4  	|                               Stunt Man, The (1980)                               	| Action\|Adventure\|Comedy\|Drama\|Romance\|Thriller 	|
| 5  	|                                Belle époque (1992)                                	|                   Comedy\|Romance                   	|
| 6  	|                           Trial, The (Procès, Le) (1962)                          	|                        Drama                        	|
| 7  	|                                 Adam's Rib (1949)                                 	|                   Comedy\|Romance                   	|
| 8  	|                                Bad Boy Bubby (1993)                               	|                        Drama                        	|
| 9  	|                               Enter the Void (2009)                               	|                        Drama                        	|
| 10 	|                              Band of Brothers (2001)                              	|                  Action\|Drama\|War                 	|

**Kelebihan dan kekurangan pendekatan yang dipilih**: 
- Kelebihan Algoritma Content Based Filtering :
    1. Model tidak memerlukan data apa pun tentang pengguna lain, karena rekomendasinya khusus untuk pengguna.
    2. Model dapat menangkap minat khusus pengguna, dan dapat merekomendasikan item khusus yang sangat sedikit diminati pengguna lain.
- Kekurangan Algoritma Content Based Filtering :
    1. Tidak mampu menentukan profil dari user baru.
    2. Jarang sekali ditemukan rekomendasi yang kegunaannya berbeda padahal beberapa orang mungkin memiliki kepentingan yang berbeda.
    3. Model hanya dapat membuat rekomendasi berdasarkan minat pengguna yang ada. Dengan kata lain, model memiliki kemampuan terbatas untuk memperluas minat pengguna yang ada.
- Kelebihan Algoritma Collaborative Filtering :
    1. Rekomendasi tetap akan berkerja dalam keadaan dimana konten sulit dianalisi sekalipun.
    2. Menghasilkan serendipity (tak terduga) item.
    3. Menghasilkan rekomendasi yang berkualitas baik
- Kekurangan Algoritma Collaborative Filtering :
    1. Membutuhkan parameter rating, sehingga jika ada item baru sistem tidak akan merekomendasikan item tersebut.
    2. Menghasilkan data yang kurang akurat ketika penilaian pada satu data terlalu sedikit dan akan menjadi salah persepsi.
    3. Teknik ini tidak memuat informasi / kegunaan dari barang yang direkomendasikan.


## Evaluation
Sekarang, setelah model selesai dilatih dengan 2 algoritma, yaitu Content Based Filtering dan Collaborative Filtering. Matriks yang digunakan untuk evaluasi berbeda untuk 2 algoritma, Untuk Model Content Based Filtering akan digunakan Cosine Similarity, dalam istilah sistem rekomendasi, tingkat kesamaan atau tingkat kemiripan disebut sebagai degree of similarity. Nilai itu akan mengukur kesamaan kosinus antara dua vektor. sehingga variabel film dan genre yang saling berkaitan akan diukur dengan kosinus sudut antara dua vektor dan menentukan apakah dua vektor menunjuk ke arah yang kira-kira sama. Sehingga dapat dilihat hasilnya apakah film yang satu dengan film yang lain memiliki tipikal jenis yang sama. Data yang diukur sekali lagi akan membandingkan nama film dengan genrenya dan dibandingkan dengan film dan genre lain. misalnya film spider-man 3 dengan genre action dijadikan sebagai acuan, hasil dari cosine similarity akan membandingkan data tersebut dan akan mendapatkan hasil output berbagai film dengan genre action yang memiliki kemiripan dengan film spider-man 3.

Sedangkan untuk Model Collaborative Filtering dihitung nilai Root Mean Squared Error pada data train dan test. Hal ini bertujuan agar nilai rmse berada dalam skala yang tidak terlalu besar. Dari hasil analisa training dapat dilihat bahwa model memberikan nilai root mean square error sebesar 0.1748 dengan loss 0.5829. Metode Root Mean Square Error (RMSE) diterapkan di pada algoritma ini untuk melihat seberapa efektif model sistem rekomendasi yang dibuat. Setelah model selesai dilatih akan dilakukan plotting pada model rekomendasinet yang telah dibuat berdasarkan nilai rmse dan val-rmse yang dihasilkan selama proses training. Perhatikanlah, proses training model cukup smooth dan model konvergen pada epochs sekitar 50. Dari proses ini, dapat diperoleh nilai error akhir sebesar sekitar 0.5829 dan error pada data validasi sebesar 0.1967. Nilai tersebut cukup bagus untuk sistem rekomendasi.


**Metriks Evaluasi**: 
Metriks Similarity Measure (Cosine Similarity) - untuk Content Based Filtering: Fungsi ini akan memberikan nilai yang semakin meningkat seiring dengan peningkatan kesamaan antar item. Kita dapat mengatakan bahwa kesamaan antara item berada dalam rentang [0, 1]. Artinya, item yang sama akan memiliki tingkat kesamaan sebesar 1 sedangkan sebaliknya adalah 0. Pengukuran tingkat kesamaan erat kaitannya dengan perhitungan jarak antar item. Secara umum hubungan antara kesamaan dan jarak adalah semakin besar jarak, kesamaan semakin kecil (menuju nol). Semakin kecil jarak, kesamaan semakin besar (menuju satu). Cosine similarity mengukur kesamaan antara dua vektor dan menentukan apakah kedua vektor tersebut menunjuk ke arah yang sama. Ia menghitung sudut cosinus antara dua vektor. Semakin kecil sudut cosinus, semakin besar nilai cosine similarity. Metrik ini sering digunakan untuk mengukur kesamaan dokumen dalam analisis teks. Untuk hasil Cosine Similarity dapat dilihat seperti pada gambar dibawah ini. Masing-masing nama film yang ada pada dataset movies.csv akan dicek nilai kesamaannya dengan metriks tersebut. dan dapat dilihat pada tabel bahwa nilai X dan Y keduanya adalah nama film yang memiliki genre masing-masing. Dapat dilihat juga bahwa masing-masing nilai antara film yang satu dengan film yang lain-nya, misalkan contoh adalah film 12 years a slave (2012), memiliki tingkat cosine similarity dengan film Inbetweeners 2, The (2014) sebesar 0.000  yang artinya tidak memiliki kemiripan sama sekali. dibandingkan dengan film Inbetweeners 2, The (2014) dengan What's Up, Doc? (1972) ang memiliki nilai cosine similarity sebesar 1.00 sehingga dikatakan memiliki kesamaan yang baik karena jaraknya semakin kecil. 
|   	| movie_name                                  	| 12 Years a Slave (2013) 	| Comic-Con Episode IV: A Fan's Hope (2011) 	| Croupier (1998) 	| Pushing Hands (Tui shou) (1992) 	| What's Up, Doc? (1972) 	|
|---	|---------------------------------------------	|------------------------:	|------------------------------------------:	|----------------:	|--------------------------------:	|-----------------------:	|
|   	| movie_name                                  	|                         	|                                           	|                 	|                                 	|                        	|
| 0 	| Best Little Whorehouse in Texas, The (1982) 	|                0.309079 	|                                       0.0 	|        0.155649 	|                        0.309079 	|               0.334666 	|
| 1 	|  Wizards of Waverly Place: The Movie (2009) 	|                0.225369 	|                                       0.0 	|        0.113494 	|                        0.225369 	|               0.244026 	|
| 2 	|          Inbetweeners 2, The (2014)         	|                0.000000 	|                                       0.0 	|        0.000000 	|                        0.000000 	|               1.000000 	|
| 3 	|               Spanglish (2004)              	|                0.466405 	|                                       0.0 	|        0.234877 	|                        0.466405 	|               0.505015 	|
| 4 	|          Angels and Insects (1995)          	|                0.540377 	|                                       0.0 	|        0.272128 	|                        0.540377 	|               0.000000 	|
| 5 	|           Scanner Darkly, A (2006)          	|                0.231293 	|                                       0.0 	|        0.116477 	|                        0.231293 	|               0.000000 	|
| 6 	|          Whistleblower, The (2010)          	|                0.564498 	|                                       0.0 	|        0.284276 	|                        0.564498 	|               0.000000 	|
| 7 	|       Welcome to the Dollhouse (1995)       	|                0.678466 	|                                       0.0 	|        0.341669 	|                        0.678466 	|               0.734632 	|
| 8 	|     Bring It On: In It To Win It (2007)     	|                0.000000 	|                                       0.0 	|        0.000000 	|                        0.000000 	|               1.000000 	|
| 9 	|  Halloween III: Season of the Witch (1982)  	|                0.000000 	|                                       0.0 	|        0.000000 	|                        0.000000 	|               0.000000 	|


Metriks Presisi - metriks evaluasi ke 2 untuk Content Based Filtering. Dalam sistem rekomendasi, presisi adalah jumlah item rekomendasi yang relevan. Dalam implementasinya biasanya menghitung dengan memanggil library scikit learn namun pada kasus rekomendasi tidak bisa digunakan karena tidak ada data target/label seperti pada supervised learning. Sehingga diperlukan penghitungan manual untuk metriks evaluasinya seperti yang dijelaskan dalam forum diskusi kode 134402. Untuk formulanya adalah , P(presisi) = #hasil rekomendasi yang relevan/ #jumlah total rekomendasi. Jadi, dalam sistem yang dibuat adalah memberi 5 item untuk direkomendasikan pada pengguna. 
Dapat dilihat dari hasil CBF yang ada, dimana data uji yang digunakan adalah :
|   	| movie_name                     	| genre                                     	|
|---	|--------------------------------	|-------------------------------------------	|
| 0 	| Spider-Man 3(2007)              	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|

Dan data hasil rekomendasi dari model yang dibuat adalah sebagai berikut:

|   	| movie_name                     	| genre                                     	|
|---	|--------------------------------	|-------------------------------------------	|
| 0 	| Iron Man 2 (2010)              	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 1 	| Matrix Reloaded, The (2003)    	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 2 	| Matrix Revolutions, The (2003) 	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 3 	| G.I. Joe: Retaliation (2013)   	| Action\|Adventure\|Sci-Fi\|Thriller\|IMAX 	|
| 4 	|                Godzilla (2014) 	| Action\|Adventure\|Sci-Fi\|IMAX           	|

Cara untuk mengetahui relevansi hasil rekomendasi adalah dilihat dari kategori item yang direkomendasikan, dimana dalam kasus ini adalah genre film. pada hasil adalah misalkan pengguna pernah menonton film spider-man 3 akan direkomendasikan film yang memiliki kesamaan dengan film yang memiliki genre yang sama dengan spiderman 3 yaitu Action\|Adventure\|Sci-Fi\|Thriller\|IMAX.
Kemudian, dari 5 item itu, ada 4 yang relevan. Maka presisinya jadi 80%. dimana P = 4/5 x 100% menjadi 80%. sehingga hasil uji metriks presisi adalah 80%.


Metriks Root Mean Squarred Error (RMSE) - untuk Collaborative Filtering: merupakan salah satu cara untuk mengevaluasi model regresi linear dengan mengukur tingkat akurasi hasil perkiraan suatu model. RMSE dihitung dengan mengkuadratkan error (prediksi “ observasi) dibagi dengan jumlah data (= rata-rata), lalu diakarkan. RMSE tidak memiliki satuan. Metode Root Mean Square Error (RMSE) diterapkan di pada proyek ini untuk melihat seberapa efektif model sistem rekomendasi yang dibuat dan seberapa akurat model yang dibuat. Root Mean Square Error (RMSE) adalah dengan mengurangi nilai aktual dengan nilai yang diuji kemudian dikuadratkan dan dijumlahkan keseluruhan hasilnya kemudian dibagi dengan banyaknya data. Hasil perhitungan tersebut selanjutnya dihitung kembali untuk mencari nilai dari akar kuadrat. Untuk Metriks RMSE pada Collaborative Training terdapat perbedaan antara plot grafik training dan validasi sebesar 0.015. pada grafik untuk sumbu X adalah RMSE dan Y adalah jumlah epoch yang dilakukan (50 Epochs). dengan hasil loss: 0.5829 , root_mean_squared_error: 0.1748 , val_loss: 0.6035 , val_root_mean_squared_error: 0.1967 . Hasil Plot dari training data dapat dilihat sperti pada gambar dibawah.
    -![Plot Metriks](https://github.com/anjuanse07/anjuanse07/blob/main/Plot_Grafik.jpg?raw=true)



### Daftar Pustaka : 
[1] Fajriansyah, M., Adikara, P., & Widodo, A. Sistem Rekomendasi Film Menggunakan Content Based Filtering. Jurnal Pengembangan Teknologi Informasi dan Ilmu Komputer, vol. 5, no. 6, p. 2188-2199, mei 2021. ISSN 2548-964X.
[2] Phorasim, P., & Yu, L. 2017. Movies Recommendation Using Collaborative Filtering and K-Means. In International Journal of Advanced Computer Research, 55-58. 
[3] Eggy Ryana Agustian, Dr Munir, Eddy Prasetyo Nugroho. 2020. Sistem Rekomendasi Film Menggunakan Metode COllaborative Filtering dan K-Nearest Neighbours. Vol 3, No 1. ISSN 2615-577X.
